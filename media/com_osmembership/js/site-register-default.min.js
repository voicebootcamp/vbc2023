!function(m,p){p(m).ready(function(){p.colorbox&&"undefined"==typeof tingle&&p(".osm-modal").colorbox({width:"80%",height:"80%",iframe:!0,scrolling:!0,rel:!1}),p("#osm_login_form").length&&OSMVALIDATEFORM("#osm_login_form"),buildStateFields("state","country",Joomla.getOptions("selectedState")),OSMMaskInputs(m.getElementById("os_form")),!0===Joomla.getOptions("hidePaymentInformation")&&p(".payment_information").css("display","none");var e=Joomla.getOptions("vatNumberField");if(e){var t=Joomla.getOptions("inputPrependClass"),n=Joomla.getOptions("addOnClass"),a=Joomla.getOptions("countryCode"),o=Joomla.getOptions("showVatNumberField"),i=p("#"+e);i.addClass("taxable");var r=i.parent().html();r='<div class="'+t+' inline-display"><span class="'+n+'" id="vat_country_code">'+a+"</span>"+r+'<span class="invalid" id="vatnumber_validate_msg" style="display: none;"> '+Joomla.JText._("OSM_INVALID_VATNUMBER")+"</span></div>",i.parent().html(r),p("#"+e).change(function(){calculateSubscriptionFee()}),0===o?p("#field_"+e).hide():p("#field_"+e).show()}var s=Joomla.getOptions("paymentNeeded");if(Joomla.getOptions("hasStripePaymentMethod")&&"undefined"!=typeof stripe){var d=elements.create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});d.mount("#stripe-card-element")}Joomla.getOptions("squareAppId")&&createSquareCardElement();var l=Joomla.getOptions("maxErrorsPerField");p("#os_form").validationEngine("attach",{maxErrorsPerField:l,onValidationComplete:function(t,e){if(!0!==e)return!1;if(t.on("submit",function(e){e.preventDefault()}),t.find("#btn-submit").prop("disabled",!0),s){var n;if(void 0===(n=p('input:radio[name="payment_method"]').length?p('input:radio[name="payment_method"]:checked').val():p('input[name="payment_method"]').val()))return!0;if("undefined"!=typeof stripePublicKey&&0===n.indexOf("os_stripe")&&p("#tr_card_number").is(":visible"))return Stripe.card.createToken({number:p('input[name="x_card_num"]').val(),cvc:p('input[name="x_card_code"]').val(),exp_month:p('select[name="exp_month"]').val(),exp_year:p('select[name="exp_year"]').val(),name:p('input[name="card_holder_name"]').val()},stripeResponseHandler),!1;if("undefined"!=typeof stripe&&0===n.indexOf("os_stripe")&&p("#stripe-card-form").is(":visible"))return stripe.createToken(d).then(function(e){e.error?(alert(e.error.message),t.find("#btn-submit").removeAttr("disabled")):stripeTokenHandler(e.token)}),!1;if(0===n.indexOf("os_squareup")&&p("#tr_card_number").is(":visible"))return sqPaymentForm.requestCardNonce(),!1;if(0===n.indexOf("os_squarecard")&&p("#square-card-form").is(":visible"))return squareCardCallBackHandle(),!1}return!0}})})}(document,jQuery);