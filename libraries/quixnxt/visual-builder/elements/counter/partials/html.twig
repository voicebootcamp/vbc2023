{% set id = advanced.identifier.id %}
{% set class = advanced.identifier.class %}
{% set classes = classNames('qx-element qx-element-counter-v2', visibilityClass(visibility), class) %}

{# counter field #}
{% set countStart = general.counter_fg_element_mode.count_start %}
{% set prefix = general.counter_fg_element_mode.counter_prefix %}
{% set suffix = general.counter_fg_element_mode.suffix %}
{% set title = general.counter_fg_element_mode.title %}

{# Alignment #}
{% set positionAlignment = general.counter_fg_element_mode.alignment %}
{% set positionAlign = 'desktop-' ~ positionAlignment.desktop ~ ' ' ~ 'tablet-' ~ positionAlignment.tablet ~ ' ' ~ 'phone-' ~ positionAlignment.phone %}

{# Wrapper Class #}
{% set wrapperClassesForCounter = classNames('qx-element-counter__wrapper') %}

{% set animation = advanced.animation_fields_group.animation %}
{% set animationRepeat = advanced.animation_fields_group.animation_repeat %}
{% set animationDelay = advanced.animation_fields_group.animation_delay %}
{% set background = advanced.background_fields_group.background %}

{% embed "animation.twig" with {
    "id" : id,
    "classes" : classes,
    "animation" : animation,
    "animationRepeat" : animationRepeat,
    "animationDelay" : animationDelay,
    "background" : background
} %}
    {% block element %}
      <div class="{{ wrapperClassesForCounter }}">
        <div class="counter-wrapper qx-flex qx-flex-column {{ positionAlign }}">
          <div class="counter-count" qx-scrollspy="cls: qx-animation-fade; repeat: true">
            <span class="counter-prefix">{{prefix}}</span>

            <span id="counter-mount">{{ countStart }}</span>

            <span class="counter-suffix">{{ suffix }}</span>
          </div>

          <div class="counter-title">
            {% if title %}
              {{title}}
            {% endif %}
          </div>
        </div>
      </div>
  {% endblock %}
{% endembed %}
