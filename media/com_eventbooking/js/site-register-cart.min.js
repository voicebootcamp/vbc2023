!function(i,l){l(i).ready(function(){l("#adminForm").validationEngine("attach",{onValidationComplete:function(t,a){return!0===a&&(t.on("submit",function(t){t.preventDefault()}),t.find("#btn-submit").prop("disabled",!0),paymentMethodCallbackHandle())}}),buildStateFields("state","country",Joomla.getOptions("selectedState"));for(var t=Joomla.getOptions("numberMembers"),a=1;a<=t;a++)buildStateFields("state_"+a,"country_"+a,"");createStripeCardElement(),Joomla.getOptions("squareAppId")&&createSquareCardElement();var e=l("#email");if(e.val()&&e.validationEngine("validate"),Joomla.getOptions("isCountryBaseTax")&&l("#country").change(calculateCartRegistrationFee),Joomla.getOptions("isEUTaxRuleEnabled")){var n=Joomla.getOptions("euVatNumberField"),o=l("#"+n);o.after('<span class="invalid" id="vatnumber_validate_msg" style="display: none;">'+Joomla.JText._("EB_INVALID_VATNUMBER")+"</span></div>"),o.change(calculateCartRegistrationFee),Joomla.getOptions("showVatNumberField")?l("#field_"+n).show():l("#field_"+n).hide()}Joomla.getOptions("hidePaymentInformation")&&l(".payment_information").css("display","none"),EBMaskInputs(i.getElementById("adminForm")),initializeTermsAndConditionsModal()}),updateCart=function(){location.href=Joomla.getOptions("cartUrl")},calculateCartRegistrationFee=function(){var a=l("#btn-submit"),e=l("#ajax-loading-animation"),n=l("#total_amount"),o=l("#amount");a.attr("disabled","disabled"),e.show();var i=Joomla.getOptions("euVatNumberField"),t='select.ticket_type_quantity, #adminForm input[name="coupon_code"], #adminForm .payment-calculation input[type="text"], #adminForm .payment-calculation input[type="number"], #adminForm .payment-calculation input[type="checkbox"]:checked, #adminForm .payment-calculation input[type="radio"]:checked, #adminForm .payment-calculation select, #adminForm input.eb-hidden-field:hidden, #adminForm select[name="country"], #adminForm select[name="state"]';i&&(t=t+', #adminForm input[name="'+i+'"]'),l("input:radio[name^=payment_method]").length?t+=", input:radio[name^=payment_method]:checked":t+=", input[name^=payment_method]";var m=Joomla.getOptions("calculateCartRegistrationFeeUrl");l.ajax({type:"POST",url:m,data:l(t),dataType:"json",success:function(t){a.removeAttr("disabled"),e.hide(),n.val(t.total_amount),l("#discount_amount").val(t.discount_amount),l("#tax_amount").val(t.tax_amount),l("#payment_processing_fee").val(t.payment_processing_fee),o.val(t.amount),l("#deposit_amount").val(t.deposit_amount),(o.length||n.length)&&0==t.payment_amount?l(".payment_information").css("display","none"):(l(".payment_information").css("display",""),updatePaymentMethod()),1==t.coupon_valid?l("#coupon_validate_msg").hide():(a.attr("disabled","disabled"),l("#coupon_validate_msg").show()),i&&(1==t.show_vat_number_field?l("#field_"+i).show():l("#field_"+i).hide(),1==t.vat_number_valid?l("#vatnumber_validate_msg").hide():l("#vatnumber_validate_msg").show())},error:function(t,a){alert(a)}})}}(document,Eb.jQuery);