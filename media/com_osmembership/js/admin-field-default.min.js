!function(o,d){d.submitbutton=function(e){var t=o.adminForm;if("cancel"===e)d.submitform(e,t);else{if(""===t.name.value)return alert(d.JText._("OSM_ENTER_CUSTOM_FIELD_NAME")),void t.name.focus();if(""===t.title.value)return alert(d.JText._("OSM_ENTER_CUSTOM_FIELD_TITLE")),void t.title.focus();if("-1"===t.fieldtype.value)return alert(d.JText._("OSM_CHOOSE_CUSTOM_FIELD_TYPE")),void t.fieldtype.focus();d.submitform(e,t)}},validateRules=function(){var e=o.adminForm,t=d.getOptions("validateRules");if("email"!==e.name.value){var n=[],a="",i=e.required.value,l=t[parseInt(e.datatype_validation.value,10)];"1"===i&&n.push("required"),0<l.length&&n.push(l),a=0<n.length?"validate["+n.join(",")+"]":"",e.validation_rules.value=a}else e.validation_rules.value="validate[required,custom[email],ajax[ajaxEmailCall]]"},o.addEventListener("DOMContentLoaded",function(){var t=o.adminForm;t.name.addEventListener("change",function(){var e=t.name.value;for(e=e.replace("osm_","");0<=e.indexOf("  ");)e=e.replace("  "," ");for(;0<=e.indexOf(" ");)e=e.replace(" ","_");e=e.replace(/[^a-zA-Z0-9_]*/gi,""),t.name.value=e}),o.getElementById("required").addEventListener("click",validateRules),t.datatype_validation.addEventListener("change",validateRules);var n=o.getElementById("depend_on_field_id");n.addEventListener("change",function(){var e=d.getOptions("siteUrl"),t=n.value;0<t?d.request({url:e+"/index.php?option=com_osmembership&view=field&format=raw&field_id="+t,method:"POST",onSuccess:function(e){o.getElementById("options_container").innerHTML=e,o.getElementById("depend_on_options_container").style.display=""},onError:function(e){alert(e.statusText)}}):(o.getElementById("options_container").innerHTML="",o.getElementById("depend_on_options_container").style.display="none")})})}(document,Joomla);