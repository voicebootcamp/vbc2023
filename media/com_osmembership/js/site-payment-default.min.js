!function(e,i){i(e).ready(function(){buildStateFields("state","country",Joomla.getOptions("selectedState"));var r=Joomla.getOptions("paymentNeeded");if(Joomla.getOptions("hasStripePaymentMethod")&&"undefined"!=typeof stripe){var a=elements.create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});a.mount("#stripe-card-element")}Joomla.getOptions("squareAppId")&&createSquareCardElement(),i("#os_form").validationEngine("attach",{onValidationComplete:function(t,e){if(!0!==e)return!1;if(t.on("submit",function(e){e.preventDefault()}),t.find("#btn-submit").prop("disabled",!0),r){var n;if(n=i('input:radio[name="payment_method"]').length?i('input:radio[name="payment_method"]:checked').val():i('input[name="payment_method"]').val(),"undefined"!=typeof stripePublicKey&&0===n.indexOf("os_stripe")&&i("#tr_card_number").is(":visible"))return Stripe.card.createToken({number:i('input[name="x_card_num"]').val(),cvc:i('input[name="x_card_code"]').val(),exp_month:i('select[name="exp_month"]').val(),exp_year:i('select[name="exp_year"]').val(),name:i('input[name="card_holder_name"]').val()},stripeResponseHandler),!1;if("undefined"!=typeof stripe&&0===n.indexOf("os_stripe")&&i("#stripe-card-form").is(":visible"))return stripe.createToken(a).then(function(e){e.error?(alert(e.error.message),t.find("#btn-submit").removeAttr("disabled")):stripeTokenHandler(e.token)}),!1;if(0===n.indexOf("os_squareup")&&i("#tr_card_number").is(":visible"))return sqPaymentForm.requestCardNonce(),!1;if(0===n.indexOf("os_squarecard"))return squareCardCallBackHandle(),!1}return!0}})})}(document,jQuery);