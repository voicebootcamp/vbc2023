!function(l,d){function e(){var e=l.adminForm,n=e.validation_rules;if("email"!==e.name.value){var t=d.getOptions("validateRules"),a=parseInt(e.datatype_validation.value),i=[],o="";"1"===e.required.value&&i.push("required"),t[a].length&&i.push(t[a]),0<i.length&&(o="validate["+i.join(",")+"]"),n.value=o}else n.value="validate[required,custom[email],ajax[ajaxEmailCall]]"}d.submitbutton=function(e){var n=l.adminForm;if("cancel"===e)d.submitform(e);else{if(""===n.name.value)return alert(d.JText._("EB_ENTER_FIELD_NAME")),void n.name.focus();if(""===n.title.value)return alert(d.JText._("EB_ENTER_FIELD_TITLE")),void n.title.focus();d.submitform(e)}},l.addEventListener("DOMContentLoaded",function(){var n=l.adminForm;n.name.addEventListener("change",function(){var e=n.name.value;e=(e=e.replace("eb_","")).replace(/[^a-zA-Z0-9_]*/gi,""),n.name.value=e}),l.getElementById("required").addEventListener("click",e),n.datatype_validation.addEventListener("change",e);var t=l.getElementById("depend_on_field_id");t.addEventListener("change",function(){var e=d.getOptions("siteUrl"),n=t.value;0<n?d.request({url:e+"/index.php?option=com_eventbooking&view=field&format=raw&field_id="+n,method:"POST",onSuccess:function(e){l.getElementById("options_container").innerHTML=e,l.getElementById("depend_on_options_container").style.display=""},onError:function(e){alert(e.statusText)}}):(l.getElementById("options_container").innerHTML="",l.getElementById("depend_on_options_container").style.display="none")})})}(document,Joomla);