!function(c,_){_(c).ready(function(){_.colorbox&&"undefined"==typeof tingle&&_(".osm-modal").colorbox({width:"80%",height:"80%",iframe:!0,scrolling:!0,rel:!1}),buildStateFields("state","country",Joomla.getOptions("selectedState")),OSMMaskInputs(c.getElementById("os_form")),!0===Joomla.getOptions("hidePaymentInformation")&&_(".payment_information").css("display","none");var e=Joomla.getOptions("vatNumberField");if(e){var t=Joomla.getOptions("inputPrependClass"),n=Joomla.getOptions("addOnClass"),a=Joomla.getOptions("countryCode"),o=Joomla.getOptions("showVatNumberField"),i=_("#"+e);i.addClass("taxable");var r=i.parent().html();r='<div class="'+t+' inline-display"><span class="'+n+'" id="vat_country_code">'+a+"</span>"+r+'<span class="invalid" id="vatnumber_validate_msg" style="display: none;"> '+Joomla.JText._("OSM_INVALID_VATNUMBER")+"</span></div>",i.parent().html(r),_("#"+e).change(function(){calculateSubscriptionFee()}),0===o?_("#field_"+e).hide():_("#field_"+e).show()}var s=Joomla.getOptions("paymentNeeded"),l=Joomla.getOptions("hasSquareupPaymentMethod"),d=Joomla.getOptions("hasStripePaymentMethod");if(d&&"undefined"!=typeof stripe){var m=elements.create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});m.mount("#stripe-card-element")}Joomla.getOptions("squareAppId")&&createSquareCardElement();var p=Joomla.getOptions("maxErrorsPerField");_("#os_form").validationEngine("attach",{maxErrorsPerField:p,onValidationComplete:function(t,e){if(!0!==e)return!1;var n;if(t.on("submit",function(e){e.preventDefault()}),t.find("#btn-submit").prop("disabled",!0),s&&(d||l)){if(void 0===(n=_('input:radio[name="payment_method"]').length?_('input:radio[name="payment_method"]:checked').val():_('input[name="payment_method"]').val()))return!0;if(d){if("undefined"!=typeof stripePublicKey&&0===n.indexOf("os_stripe")&&_("#tr_card_number").is(":visible"))return Stripe.card.createToken({number:_('input[name="x_card_num"]').val(),cvc:_('input[name="x_card_code"]').val(),exp_month:_('select[name="exp_month"]').val(),exp_year:_('select[name="exp_year"]').val(),name:_('input[name="card_holder_name"]').val()},stripeResponseHandler),!1;if("undefined"!=typeof stripe&&0===n.indexOf("os_stripe")&&_("#stripe-card-form").is(":visible"))return stripe.createToken(m).then(function(e){e.error?(alert(e.error.message),t.find("#btn-submit").removeAttr("disabled")):stripeTokenHandler(e.token)}),!1}if(l&&"os_squareup"===n&&_("#tr_card_number").is(":visible"))return sqPaymentForm.requestCardNonce(),!1}return!0}});var u=c.getElementById("btnLoginButton");u&&u.addEventListener("click",function(){var e=c.getElementById("login_username"),t=c.getElementById("login_password");return""===e.value?(alert(Joomla.JText._("OSM_ENTER_USERNAME_TO_LOGIN")),void e.focus()):""===t.value?(alert(Joomla.JText._("OSM_ENTER_PASSWORD_TO_LOGIN")),void e.focus()):(c.getElementById("username").value=e.value,c.getElementById("password").value=t.value,void c.getElementById("osm_login_form").submit())})})}(document,jQuery);