!function(o,r){r(o).ready(function(){if(r("#adminForm").validationEngine("attach",{onValidationComplete:function(e,t){if(!0!==t)return!1;var a;if(e.on("submit",function(e){e.preventDefault()}),e.find("#btn-submit").prop("disabled",!0),0===(a=r("input:radio[name^=payment_method]").length?r("input:radio[name^=payment_method]:checked").val():r("input[name^=payment_method]").val()).indexOf("os_stripe")){if("undefined"!=typeof stripePublicKey)return Stripe.card.createToken({number:r("#x_card_num").val(),cvc:r("#x_card_code").val(),exp_month:r("select[name^=exp_month]").val(),exp_year:r("select[name^=exp_year]").val(),name:r("#card_holder_name").val()},stripeResponseHandler),!1;if("undefined"!=typeof stripe)return stripe.createToken(n).then(function(e){e.error?(alert(e.error.message),r("#btn-submit").prop("disabled",!1)):stripeTokenHandler(e.token)}),!1}return"os_squareup"===a?(sqPaymentForm.requestCardNonce(),!1):0!==a.indexOf("os_squareup")||(squareCardCallBackHandle(),!1)}}),buildStateFields("state","country",Joomla.getOptions("selectedState")),"undefined"!=typeof stripe){var n=elements.create("card",{style:{base:{fontSize:"16px",color:"#32325d"}}});n.mount("#stripe-card-element")}Joomla.getOptions("squareAppId")&&createSquareCardElement()}),calculateRegistrationFee=function(){if(updatePaymentMethod(),1==o.adminForm.show_payment_fee.value){var e,t=r("#registrant_id").val(),a=r("#btn-submit"),n=r("#ajax-loading-animation");a.attr("disabled","disabled"),n.show(),e=r("input:radio[name^=payment_method]").length?r("input:radio[name^=payment_method]:checked").val():r("input[name^=payment_method]").val(),r.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=register.calculate_registration_fee&payment_method="+e+"&registrant_id="+t,dataType:"json",success:function(e){a.removeAttr("disabled"),n.hide(),r("#amount").length&&r("#total_amount").val(e.amount),r("#payment_processing_fee").val(e.payment_processing_fee),r("#gross_amount").val(e.gross_amount)},error:function(e,t){alert(t)}})}},calculateRemainderFee=function(){if(updatePaymentMethod(),1==o.adminForm.show_payment_fee.value){var e,t=r("#registrant_id").val(),a=r("#btn-submit"),n=r("#ajax-loading-animation");a.attr("disabled","disabled"),n.show(),e=r("input:radio[name^=payment_method]").length?r("input:radio[name^=payment_method]:checked").val():r("input[name^=payment_method]").val(),r.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=register.calculate_remainder_fee&payment_method="+e+"&registrant_id="+t,dataType:"json",success:function(e){a.removeAttr("disabled"),n.hide(),r("#amount").length&&r("#total_amount").val(e.amount),r("#payment_processing_fee").val(e.payment_processing_fee),r("#gross_amount").val(e.gross_amount)},error:function(e,t){alert(t)}})}}}(document,Eb.jQuery);